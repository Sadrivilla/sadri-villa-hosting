<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Sign Up | Sadri Villa</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
/* ===== BASE ===== */
body{
  margin:0;
  font-family:Arial,sans-serif;
  background:#f5f7fb;
  min-height:100vh;
}
.container{
  display:flex;
  min-height:100vh;
}

/* ===== LEFT PANEL ===== */
.left{
  flex:1;
  padding:60px;
  background:#f8fafc;
  display:flex;
  flex-direction:column;
  justify-content:center;
}
.left img{
  height:46px;
  margin-bottom:30px;
}
.left h1{
  font-size:38px;
  margin-bottom:10px;
  color:#0f172a;
}
.left p{
  font-size:16px;
  color:#475569;
  max-width:460px;
}
.features{
  margin-top:30px;
}
.feature{
  display:flex;
  align-items:center;
  gap:12px;
  margin-bottom:14px;
  color:#0f172a;
  font-weight:600;
}
.dot{
  width:36px;
  height:36px;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  color:#fff;
  font-size:16px;
}
.blue{background:#2563eb}
.green{background:#16a34a}
.purple{background:#7c3aed}

/* ===== RIGHT PANEL ===== */
.right{
  flex:1;
  display:flex;
  align-items:center;
  justify-content:center;
  background:#eef2ff;
}
.card{
  background:#fff;
  padding:36px;
  border-radius:22px;
  width:100%;
  max-width:420px;
  box-shadow:0 20px 45px rgba(0,0,0,.15);
}
.card h2{
  margin-bottom:6px;
}
.card p{
  margin-top:0;
  margin-bottom:20px;
  color:#475569;
}

/* ===== FORM ===== */
.field{margin-bottom:14px}
.field input{
  width:100%;
  height:52px;
  padding:0 14px;
  border-radius:12px;
  border:1.5px solid #d1d5db;
  font-size:15px;
}

button{
  width:100%;
  height:54px;
  margin-top:10px;
  border:none;
  border-radius:14px;
  background:#2563eb;
  color:#fff;
  font-size:16px;
  cursor:pointer;
  font-weight:600;
}
button:disabled{
  opacity:.6;
  cursor:not-allowed
}

/* ===== MESSAGE ===== */
.msg-box{
  display:none;
  margin-top:16px;
  padding:14px;
  border-radius:12px;
  font-size:14px;
  font-weight:600;
  text-align:center
}
.msg-success{
  display:block;
  background:#dcfce7;
  color:#166534;
  border:1.5px solid #22c55e
}
.msg-error{
  display:block;
  background:#fee2e2;
  color:#991b1b;
  border:1.5px solid #ef4444
}

/* ===== LINKS ===== */
.links{
  text-align:center;
  margin-top:14px;
}
.links a{
  color:#2563eb;
  font-weight:600;
  text-decoration:none;
}

/* ===== LOADER ===== */
.loader{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.35);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:9999
}
.loader div{
  width:60px;
  height:60px;
  border:6px solid #e5e7eb;
  border-top:6px solid #2563eb;
  border-radius:50%;
  animation:spin 1s linear infinite
}
@keyframes spin{to{transform:rotate(360deg)}}

/* ===== MOBILE ===== */
@media(max-width:900px){
  .container{flex-direction:column}
  .left{padding:40px}
}
</style>
</head>

<body>

<div class="container">

  <!-- LEFT -->
  <div class="left">
    <img src="images/logo.png" alt="Sadri Villa Logo">
    <h1>Create your account</h1>
    <p>Join Sadri Villa to access heritage services and community support.</p>

    <div class="features">
      <div class="feature">
        <div class="dot blue">âœ“</div> Free Registration
      </div>
      <div class="feature">
        <div class="dot green">âœ“</div> Secure & Private
      </div>
      <div class="feature">
        <div class="dot purple">âœ“</div> Admin Verified Access
      </div>
    </div>
  </div>

  <!-- RIGHT -->
  <div class="right">
    <div class="card">
      <h2>Sign Up</h2>
      <p>Create your Sadri Villa account</p>

      <!-- SAME INPUT IDS -->
      <div class="field"><input id="name" placeholder="Full Name"></div>
      <div class="field"><input id="phone" placeholder="Mobile Number"></div>
      <div class="field"><input id="email" type="email" placeholder="Email"></div>
      <div class="field"><input id="password" type="password" placeholder="Password"></div>
      <div class="field"><input id="confirm" type="password" placeholder="Confirm Password"></div>

      <button id="btn" onclick="register()">Create Account</button>

      <div id="msg" class="msg-box"></div>

      <div class="links">
        Already have an account? <a href="login.html">Login</a>
      </div>
    </div>
  </div>

</div>

<!-- LOADER -->
<div class="loader" id="loader"><div></div></div>

<!-- ðŸ”¥ SAME FIREBASE SCRIPT (UNCHANGED) -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getAuth, createUserWithEmailAndPassword }
  from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
import { getFirestore, setDoc, doc }
  from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

/* FIREBASE */
const app = initializeApp({
  apiKey:"AIzaSyC7gkT4F_dRJpWfef12y6cwV3F2PTMJ6fY",
  authDomain:"sadri-villa-14c06.firebaseapp.com",
  projectId:"sadri-villa-14c06"
});
const auth = getAuth(app);
const db = getFirestore(app);

window.register = async () => {
  const name = document.getElementById("name").value.trim();
  const phone = document.getElementById("phone").value.trim();
  const email = document.getElementById("email").value.trim();
  const password = document.getElementById("password").value;
  const confirm = document.getElementById("confirm").value;

  const msg = document.getElementById("msg");
  const loader = document.getElementById("loader");
  const btn = document.getElementById("btn");

  msg.style.display = "none";
  msg.className = "msg-box";

  if (!name || !phone || !email || !password || !confirm) {
    msg.textContent = "All fields are required";
    msg.classList.add("msg-error");
    msg.style.display = "block";
    return;
  }

  if (password !== confirm) {
    msg.textContent = "Password and Confirm Password do not match";
    msg.classList.add("msg-error");
    msg.style.display = "block";
    return;
  }

  if (password.length < 6) {
    msg.textContent = "Password must be at least 6 characters";
    msg.classList.add("msg-error");
    msg.style.display = "block";
    return;
  }

  try {
    loader.style.display = "flex";
    btn.disabled = true;

    const cred = await createUserWithEmailAndPassword(auth, email, password);

    await setDoc(doc(db,"users",cred.user.uid),{
      role:"user",
      approved:false,
      adminFields:{ Name:name, Email:email, Phone:phone },
      createdAt:new Date().toISOString()
    });

    msg.textContent="Registration successful âœ… Redirecting to login...";
    msg.classList.add("msg-success");
    msg.style.display="block";

    setTimeout(()=>location.href="login.html",4000);

  } catch (e) {
    msg.textContent=e.message;
    msg.classList.add("msg-error");
    msg.style.display="block";
  } finally {
    loader.style.display="none";
    btn.disabled=false;
  }
};
</script>

</body>
</html>
